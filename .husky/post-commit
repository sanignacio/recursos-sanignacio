#!/usr/bin/env bash

# Only for now until we fix the git push errors
exit 1

branch_name=$(git symbolic-ref --short HEAD)
retcode=$?
non_push_suffix="_local"

if [ $retcode -ne 0 ]; then
    echo "ğŸ¤¡ğŸ’€ Detached HEAD detected. Congratulations, clown. ğŸ’€ğŸ¤¡"
    echo "What's next? Coding in Notepad? Absolute circus act. ğŸª"
    exit 1
fi

if [[ $branch_name == *$non_push_suffix ]]; then
    echo "ğŸ™ƒğŸ›‘ Branch '$branch_name' ends with '$non_push_suffix', so no pushing for you. ğŸ’€ğŸ’¤"
    echo "Translation: you're too much of a coward to push this garbage to origin. ğŸ—‘ï¸"
    echo "Pathetic. ğŸ¤¡"
else
    echo
    echo "ğŸš€ğŸ”¥ Hold on tight! Pushing your precious branch '$branch_name' to origin... ğŸ”¥ğŸš€"
    git push origin $branch_name
    echo "ğŸ‰ğŸ¤¡ Congrats! Somehow your code survived the push. Miracles happen, right? ğŸ¤¡ğŸ‰"
fi
